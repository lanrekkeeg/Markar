CREATE TABLE STUDENTS(STUDENT_NAME VARCHAR(30) NOT NULL, ROLL_NO VARCHAR(7) NOT NULL PRIMARY KEY, EMAIL VARCHAR(17) NOT NULL, TOKEN VARCHAR(30) NOT NULL);


CREATE TABLE CODES_LIST(NAME VARCHAR(40) NOT NULL, CODE VARCHAR(6) NOT NULL PRIMARY KEY);
CREATE TABLE STUDENTS_LIST(CODE VARCHAR(6) NOT NULL, ROLL_NO VARCHAR(7) NOT NULL, SECTION VARCHAR(1) NOT NULL, INDEX(CODE), INDEX(ROLL_NO), INDEX(SECTION), CONSTRAINT FK_SL FOREIGN KEY(ROLL_NO) REFERENCES STUDENTS(ROLL_NO) ON UPDATE CASCADE, CONSTRAINT FK_SL2 FOREIGN KEY(CODE) REFERENCES CODES_LIST(CODE) ON UPDATE CASCADE, CONSTRAINT PK_SL PRIMARY KEY(CODE,ROLL_NO,SECTION));

CREATE TABLE ASSIGNMENTS(ASSIGNMENT_NO INT(2) NOT NULL, ROLL_NO VARCHAR(7) NOT NULL, OBTAINED_MARKS INT(3) NOT NULL, CODE VARCHAR(6) NOT NULL, SUBMISSION_STATUS INT(1) NOT NULL, INDEX(ASSIGNMENT_NO), INDEX(ROLL_NO), INDEX(CODE), CONSTRAINT FK_ASSIGN FOREIGN KEY(ASSIGNMENT_NO) REFERENCES META_ASSIGN(ASSIGN_NO) ON UPDATE CASCADE, CONSTRAINT FK_ASSIGN1 FOREIGN KEY(ROLL_NO) REFERENCES STUDENTS(ROLL_NO) ON UPDATE CASCADE, CONSTRAINT FK_ASSIGN2 FOREIGN KEY(CODE) REFERENCES CODES_LIST(CODE) ON UPDATE CASCADE, CONSTRAINT PK_ASSIGN PRIMARY KEY(ASSIGNMENT_NO, ROLL_NO, CODE));


CREATE TABLE TASKS(TASK_NO INT(2) NOT NULL, ROLL_NO VARCHAR(7) NOT NULL, OBTAINED_MARKS INT(3) NOT NULL, LAB_CODE VARCHAR(6) NOT NULL, SUBMISSION_STATUS INT(1) NOT NULL, INDEX(TASK_NO), INDEX(ROLL_NO), INDEX(LAB_CODE), CONSTRAINT FK_TASKS1 FOREIGN KEY(TASK_NO) REFERENCES META_TASK(TASK_NO) ON UPDATE CASCADE, CONSTRAINT FK_TASKS2 FOREIGN KEY(ROLL_NO) REFERENCES STUDENTS(ROLL_NO) ON UPDATE CASCADE, CONSTRAINT FK_TASKS3 FOREIGN KEY(LAB_CODE) REFERENCES CODES_LIST(CODE) ON UPDATE CASCADE, CONSTRAINT PK_TASKS PRIMARY KEY(TASK_NO, ROLL_NO, LAB_CODE));


CREATE TABLE META_ASSIGN(ASSIGN_NO INT(2) NOT NULL, CODE VARCHAR(6) NOT NULL, SECTION VARCHAR(1) NOT NULL, DEADLINE DATE NOT NULL, MARKS INT(3) NOT NULL, INDEX(ASSIGN_NO), INDEX(CODE), INDEX(SECTION), CONSTRAINT FK_MA FOREIGN KEY(CODE) REFERENCES CODES_LIST(CODE) ON UPDATE CASCADE, CONSTRAINT PK_MA PRIMARY KEY(ASSIGN_NO,CODE,SECTION));


CREATE TABLE META_TASK(TASK_NO INT(2) NOT NULL, CODE VARCHAR(6) NOT NULL, SECTION VARCHAR(1) NOT NULL, DEADLINE DATETIME NOT NULL, MARKS INT(3) NOT NULL, INDEX(TASK_NO), INDEX(CODE), INDEX(SECTION), CONSTRAINT FK_MT FOREIGN KEY(CODE) REFERENCES CODES_LIST(CODE) ON UPDATE CASCADE, CONSTRAINT PK_MT PRIMARY KEY(TASK_NO,CODE,SECTION));

CREATE TABLE ADMIN(USERNAME VARCHAR(20) NOT NULL PRIMARY KEY, TOKEN VARCHAR(30) NOT NULL);


load data local infile '[filename].txt' into table [tablename] fields terminated by ',';
